{% extends "base_site.html" %}
{% block title %}Flat Organizer{% endblock %}

{% block content %}

    <h2>Welcome to {{ flat_info.name }}!</h2>

    <div id="flatDescription" class ="row">
        <div class="span2" id="pictureContainer">
            </br>
            [Such a cool picture here]
        </div>
        <div class = "span8" id="flatInfo">

            <h5>Flat description <small>
                {{ flat_info.description }}
            </small>
            </h5>


            <div id="memberList" >
                <h5>Members in flat<small>
                {% for member in flat_members %}
                {{ member.user.first_name }},
                <!--{{ member.name }}-->
                <!--{{ member.id }}-->

                {% endfor %}
                </small>
                </h5>
            </div>

        </div>
    </div>

    <input type="Button" class="btn-primary"  id="btnCreateItem" value ="Create Item"/>
    <div id="flatLists" class = "row bord">
        <div id="flatTaskList" class ="span6">
            <h3>Task list</h3>
            <table class="table table-striped">
                <tr>
                    <th>Taskname </th>
                    <th>Category</th>
                    <th>Points</th>
                    <th>Done</th>
                </tr>
                {% for task in task_list %}
                    <tr id="{{task.id}}">
                        <td> {{ task.name }}</td>
                        <td> {{ task.category }} </td>
                        <td> {{ task.credits }}</td>
                        <!--<form action="" method="POST">-->
                        <td> <input type="submit" value ="Done" id="btnSetTaskDone" class ="btn-primary"/></td>
                        <!--</form>-->
                    </tr>
                {% endfor %}
            </table>
        </div>

        <div id="flatShoppingList" class ="span5 offset1">
            <h3>Shopping list</h3>
            <table class = "table table-striped">
                <th>Name </th>
                <th>Category</th>
                <th>Points</th>
                <th>Done</th>
                {% for shopping_item in shopping_list %}
                    <tr id="{{ shopping_item.id }}" >
                        <td> {{ shopping_item.name }} </td>
                        <td> {{ shopping_item.category }}</td>
                        <td> {{ shopping_item.credits }} </td>
                        <td> <input type="button" value ="Done" id="btnSetShoppingListDone" class ="btn-primary"/> </td>
                    </tr>
                {% endfor %}

            </table>


            </br>
        </div>
    </div>


<script type="text/javascript">
    $(document).ready(function() {

        $("#btnSetTaskDone").click(function() {
            var taskId = $(this).parent().parent().attr("id");
            //alert(taskId+10);
            $("#" + taskId).remove();
            //Use this ID to update this in DB.


        });
        $("#btnSetShoppingListDone").click(function() {
            var taskId = $(this).parent().parent().attr("id");
            //alert(taskId+10);
            $("#" + taskId).remove();
            //Use this ID to update this in DB.


        });



        $("#btnCreateItem").click(function() {
            alert("Button clicked");
            var taskId = $("flatTasksList").attr("id");
            alert(taskId);
            //Use this ID to update this in DB.


        });

    });



</script>

{% endblock content %}
